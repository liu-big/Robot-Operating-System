# `launch` 文件夹使用开发操作手册

## 1. 概述

在 `send_goals` ROS 包中，`launch` 文件夹用于存放 `.launch` 文件和相关的配置文件（如 `.yaml`）。这些文件是基于 XML 格式的配置文件，用于定义和启动与导航目标发送、相机处理以及其他辅助功能相关的 ROS 节点、设置参数、以及集成可视化和控制环境。它们提供了一种方便的方式来管理和启动复杂的机器人系统，例如启动 USB 摄像头、进行相机校正、或控制 PID 进程。

## 2. 文件夹结构

```
src/send_goals/launch/
├── camera_correct.launch
├── ost.yaml
├── stop_pid.launch
└── usb_cam.launch
```

- `camera_correct.launch`: 可能用于启动相机图像校正相关的节点，例如加载相机标定参数并应用图像畸变校正。
- `ost.yaml`: 这是一个 YAML 格式的配置文件，可能包含了相机标定参数或其他与相机相关的配置。
- `stop_pid.launch`: 可能用于启动或控制一个用于停止 PID 进程的节点或脚本，例如在机器人到达目标后停止其运动。
- `usb_cam.launch`: 用于启动 USB 摄像头驱动的 launch 文件，使其能够发布图像数据到 ROS 话题。

## 3. 主要功能与用途

`launch` 文件夹的主要功能是：

- **相机驱动与校正**：启动 USB 摄像头并进行图像校正，为后续的图像处理和计算机视觉任务提供高质量的图像数据。
- **PID 控制管理**：提供启动或停止 PID 控制进程的机制，这对于机器人的精确运动控制至关重要。
- **参数配置**：在节点启动时为其设置参数，这些参数会被加载到 ROS 参数服务器，例如相机参数、控制阈值等。
- **模块化管理**：通过不同的 `.launch` 文件，将相机、控制等功能模块化，便于管理和复用。

## 4. 使用方法

- **启动 USB 摄像头**：
  在 ROS 环境中，打开终端并导航到你的工作空间，然后使用 `roslaunch` 命令运行相应的 launch 文件：
  ```bash
  roslaunch send_goals usb_cam.launch
  ```
- **启动相机校正**：
  ```bash
  roslaunch send_goals camera_correct.launch
  ```
- **启动 PID 停止控制**：
  ```bash
  roslaunch send_goals stop_pid.launch
  ```
- **修改配置**：
  直接编辑 `launch` 文件夹中的 `.launch` 文件或 `.yaml` 文件来修改启动参数或配置。修改后，需要重新启动相应的 launch 文件以使更改生效。

## 5. 项目全局应用

在 `ucar_ws` 项目中，`send_goals` 包的 `launch` 文件夹是集成和管理机器人感知与控制模块的关键。它使得开发者能够通过简单的命令启动复杂的相机系统和控制逻辑，并将其数据集成到 ROS 生态系统中，为导航、目标识别和精确操作等应用提供基础。这种集中式的启动管理极大地简化了系统的集成和测试过程。

## 6. 维护与更新

- **参数调优**：根据实际应用场景和硬件，调整 `launch` 文件中的参数以优化相机性能或控制效果。
- **添加新功能**：如果需要新的相机或控制配置，可以在此文件夹中创建新的 `.launch` 文件。
- **版本控制**：确保所有 `.launch` 和 `.yaml` 文件都纳入版本控制，并记录每次更新的详细信息。

## 7. 故障排除

- **Launch 文件启动失败**：
  - 检查终端输出的错误信息，通常会指示哪个节点或参数加载失败。
  - 确保所有引用的文件路径（如 `.yaml` 文件）都正确无误。
  - 检查所有依赖的 ROS 包是否已安装并正确编译。
- **USB 摄像头无图像**：
  - 确认 USB 摄像头已正确连接到计算机，并且驱动已安装。
  - 检查 `usb_cam.launch` 中配置的设备路径（如 `/dev/video0`）是否与实际设备匹配。
  - 检查 ROS 话题（通常是 `/usb_cam/image_raw`）是否正在发布数据，可以使用 `rostopic list` 和 `rostopic echo /usb_cam/image_raw` 进行检查。
- **相机校正效果不佳**：
  - 检查 `ost.yaml` 中的相机标定参数是否准确。
  - 确保相机校正节点已正确启动并订阅了原始图像话题。
- **PID 控制异常**：
  - 检查 `stop_pid.launch` 中启动的控制节点是否正常运行。
  - 检查控制逻辑是否正确订阅了必要的传感器数据或状态信息。